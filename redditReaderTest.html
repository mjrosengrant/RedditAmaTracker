<html>
    <head>
        
    </head>
    <body>
        <script>
            function searchName(searchTerms)
            {
                //Creates URL formatted to search reddit api
                //http://www.reddit.com/r/IAmA/search?q=barack+obama&restrict_sr=on
                var xmlHttp = null;
                var baseurl = 'http://www.reddit.com/r/IamA/search.json?q=';
                
                //When placed in the url this limits search terms to specific subreddit
                var restrict_search = '&restrict_sr=on';
                //Sorts results by relevance
                var sortByRelevance='&sort=relevance';
                
                //Removes leading and trailing spaces and replaces spaces in SearchTerm with + signs
                searchTerms = searchTerms.trim();
                
                //Removes multiple spaces between words
                searchTerms = searchTerms.replace(/ +(?= )/g,'');
                searchTerms = searchTerms.split(' ').join('+');

                document.write("Check searchTerm = " + searchTerms + '<br/>');
                
                var theUrl = baseurl+searchTerms+sortByRelevance + restrict_search;

                document.write('Check theUrl = ' + theUrl +'<br/>');
                
                xmlHttp = new XMLHttpRequest();
                xmlHttp.open("GET", theUrl, false);
                xmlHttp.send(null);
                
                var results = xmlHttp.responseText;
                var obj = JSON.parse(results);
                document.write('obj.type= ' + obj.kind + "<br/>");
                document.write(obj.data.children.length + " results found<br><br>");

            
                //Loops through and prints title of each AMA
                for(var i=0; i<obj.data.children.length;i++){
                    //Prints out the title of each ama as a link to the original post
                    document.write("<a href=" + obj.data.children[i].data.url + " target='_blank'>" +  obj.data.children[i].data.title + "</a> <br/>");
                }
           }
            
            function httpGet(theUrl){
                var xmlHttp = null;
                xmlHttp = new XMLHttpRequest();
                xmlHttp.open("GET", theUrl, false);
                xmlHttp.send(null);
                
                return xmlHttp.responseText;
            }
            
        </script>
        <div id="form">
           <form> <input type='text' id='searchTerms'/><input type=button onclick="var terms=document.getElementById('searchTerms').value; searchName(terms)" /> </form>
        </div>
        <div id="output">
            <h3>AMA JSON information</h3>
            <h4>Enter a person/group of interest below<br></h4>
        </div>
    </body>
</html>